<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width">
	<style>
		body {
			margin: 0;
		}
		.color {
			width: 50%;
			height: 100vh;
			border: 0;
			padding: 0;
			float: left;
		}
		.range {
			display: block;
			width: 100%;
			margin: 0;
			height: 10vh;
		}
		.range:before {
			content: attr(data-val);
		}
		.range__wrapper {
			position: absolute;
			left: 0;
			right: 0;
			bottom: 0;
		}
	</style>
	<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.12.4.min.js"></script>
	<script type="text/javascript">
		$(function() {
			var r = 0, g = 0, b = 0, d1 = 0, d2 = 0, d3 = 0, d4 = 0, r2 = 0, g2 = 0, b2 = 0;
	    $('.color').change(function(e){
	    	var t = e.target,
	    			v = t.value;
	    	switch(t.id) {
			    case 'c1':
			    	r = hexToRgb(v).r;
			    	g = hexToRgb(v).g;
			    	b = hexToRgb(v).b;
			      break;
			    case 'c2':
			    	r2 = hexToRgb(v).r;
			    	g2 = hexToRgb(v).g;
			    	b2 = hexToRgb(v).b;
			      break;
				}
	    	sendRequest(r,g,b,d1,d2,d3,d4,r2,g2,b2);
	    });
	    $('.range').change(function(e){
	    	var t = e.target,
	    			v = t.value * 1;
	    	$(this).attr('data-val', v);
	    	switch(t.id) {
			    case 'd1':
	    			d1 = v
			      break;
			    case 'd2':
	    			d2 = v
			      break;
			    case 'd3':
	    			d3 = v
			      break;
			    case 'd4':
	    			d4 = v
			      break;
				}
	    	sendRequest(r,g,b,d1,d2,d3,d4,r2,g2,b2);
	    });
	    function sendRequest(r,g,b,d1,d2,d3,d4,r2,g2,b2){
	    	$.ajax('http://192.168.0.14/?pin='+r+','+g+','+b+','+d1+','+d2+','+d3+','+d4+','+r2+','+g2+','+b2);
	    }
			function hexToRgb(hex) {
			    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
			    return result ? {
			        r: parseInt(result[1], 16),
			        g: parseInt(result[2], 16),
			        b: parseInt(result[3], 16)
			    } : null;
			}
		});
	</script>
</head>
<body>
	<input class="color" id="c1" type="color" value="#000000">
	<input class="color" id="c2" type="color" value="#000000">
	<div class="range__wrapper">
		<input class="range" id="d1" type="range" value="0" data-val="0" min="0" max="2000">
		<input class="range" id="d2" type="range" value="0" data-val="0" min="0" max="10000">
		<input class="range" id="d3" type="range" value="0" data-val="0" min="0" max="2000">
		<input class="range" id="d4" type="range" value="0" data-val="0" min="0" max="10000">
	</div>
</body>
</html>